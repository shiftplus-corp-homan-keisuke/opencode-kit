---
description: マージリクエストの内容を作成する
---

# マージリクエスト本文作成ワークフロー

現在のブランチの変更内容を分析し、レビュアーにとって理解しやすいマージリクエストの本文を生成します。

## 生成する内容

### 必須セクション

#### 1. 📝 **変更概要 (Summary)**
- 何を変更したのか(What)を1-2文で簡潔に
- ビジネス的な価値や目的を明確に

#### 2. 🎯 **変更の目的 (Motivation)**
- なぜこの変更が必要か(Why)
- 解決する課題やIssue番号への参照
- ユーザーやシステムへの影響

#### 3. 🔧 **実装内容 (Implementation Details)**
- どのように実装したか(How)の技術的な説明
- 主要な設計判断とその理由
- 使用した技術やライブラリ
- アーキテクチャ上の変更点

#### 4. 📁 **変更されたファイル (Changed Files)**
変更を論理的にグループ化して説明:
```
### 🎨 UIコンポーネント
- `path/to/component.tsx` - [変更内容の説明]

### 🔧 ビジネスロジック
- `path/to/logic.ts` - [変更内容の説明]

### 📋 型定義
- `path/to/types.ts` - [変更内容の説明]

### 🧪 テスト
- `path/to/test.spec.ts` - [変更内容の説明]
```

#### 5. ✅ **動作確認 (Testing)**
- 実施した手動テスト
- 自動テストの追加・変更内容
- 確認したシナリオ(正常系・異常系)

#### 6. 📸 **スクリーンショット・デモ (Optional)**
UI変更がある場合:
- Before/After のスクリーンショット
- 動作のGIF/動画
- 主要な画面遷移の確認

#### 7. 🚨 **レビューポイント (Review Focus)**
レビュアーに特に注目してほしい点:
- 設計判断の妥当性
- パフォーマンスへの影響
- セキュリティ上の考慮事項
- エッジケースの処理

#### 8. 📋 **チェックリスト (Checklist)**
```markdown
- [ ] コードが既存の設計パターンに従っている
- [ ] 適切なテストを追加・更新した
- [ ] ドキュメントを更新した(必要な場合)
- [ ] ビルドエラーがない
- [ ] Linterの警告を解消した
- [ ] 型エラーがない
- [ ] 破壊的変更がある場合、マイグレーション手順を記載した
- [ ] パフォーマンスへの影響を確認した
```

#### 9. 🔗 **関連情報 (Related)**
- 関連するIssue: `#123`
- 関連するMR: `!456`
- 参考にしたドキュメント・記事
- 技術的な議論のリンク

#### 10. ⚠️ **注意事項 (Notes)**
- 既知の制限事項
- デプロイ時の注意点
- 必要な環境変数の追加

## 生成プロセス

### ステップ1: ブランチ情報の収集
```bash
# ブランチ名とベースブランチを確認
git branch --show-current
git log <base-branch>..HEAD --oneline

# 変更ファイル一覧
git diff <base-branch>...HEAD --name-status

# 変更統計
git diff <base-branch>...HEAD --stat --summary
```

### ステップ2: 変更内容の分析
- 各ファイルの変更を確認
- 変更の種類を分類(feat/fix/refactor/docs/test など)
- 主要な変更点を特定

### ステップ3: マージリクエスト本文の生成
以下のテンプレートに基づいて生成:

```markdown
## 📝 変更概要

[1-2文で変更内容を説明]

## 🎯 変更の目的

### 背景
[なぜこの変更が必要か]

### 解決する課題
- Closes #[Issue番号]
- [課題の説明]

### ユーザーへの影響
[エンドユーザーやシステムへの影響を説明]

## 🔧 実装内容

### 主要な変更
1. **[変更カテゴリ1]**: [説明]
2. **[変更カテゴリ2]**: [説明]
3. **[変更カテゴリ3]**: [説明]

### 技術的な詳細
[設計判断、使用した技術、アーキテクチャの変更など]

### パフォーマンスへの影響
[パフォーマンスに影響がある場合、その詳細と測定結果]

## 📁 変更されたファイル

### 🎨 UIコンポーネント
- `[ファイルパス]` - [変更内容]

### 🔧 ロジック・ビジネスルール
- `[ファイルパス]` - [変更内容]

### 📋 型定義・インターフェース
- `[ファイルパス]` - [変更内容]

### 🧪 テスト
- `[ファイルパス]` - [変更内容]

### 📚 ドキュメント
- `[ファイルパス]` - [変更内容]

## ✅ 動作確認

### 手動テスト
- [x] [確認シナリオ1]
- [x] [確認シナリオ2]
- [x] [確認シナリオ3]

### 自動テスト
- [追加・変更したテストの説明]
- テストカバレッジ: [必要に応じて記載]

### 確認環境
- ブラウザ: [Chrome/Firefox/Safari など]
- OS: [Windows/macOS/Linux]
- 画面サイズ: [Desktop/Tablet/Mobile]

## 📸 スクリーンショット

### Before
[変更前のスクリーンショット]

### After
[変更後のスクリーンショット]

## 🚨 レビューポイント

レビュアーの皆様、以下の点を重点的にご確認ください:

1. **[ポイント1]**: [理由]
2. **[ポイント2]**: [理由]
3. **[ポイント3]**: [理由]

## 📋 チェックリスト

### コード品質
- [ ] コードが既存の設計パターン(Container/Presentational等)に従っている
- [ ] TypeScriptの型定義が適切で、`any`の使用を最小限にしている
- [ ] ESLint/Prettierのルールに従っている
- [ ] 不要なコメントアウトや debug コードを削除している

### テスト
- [ ] 新機能・変更に対する適切なテストを追加した
- [ ] 既存のテストが全て通過している
- [ ] エッジケースのテストを追加した

### ドキュメント
- [ ] コードコメントで複雑なロジックを説明している
- [ ] README やドキュメントを更新した(必要な場合)
- [ ] APIの変更がある場合、仕様書を更新した

### ビルド・CI
- [ ] ローカルでビルドが成功することを確認した
- [ ] 型チェック(`npm run type-check`)が通る
- [ ] Linterの警告を全て解消した
- [ ] CI/CDパイプラインが成功している

### セキュリティ・パフォーマンス
- [ ] セキュリティリスクがないことを確認した
- [ ] パフォーマンスへの悪影響がないことを確認した
- [ ] 必要に応じてメモ化(useMemo/useCallback)を実装した

### その他
- [ ] 破壊的変更がある場合、マイグレーション手順を記載した
- [ ] 環境変数の追加がある場合、`.env.example`を更新した
- [ ] デプロイ時の注意事項を記載した

## 🔗 関連情報

- Related Issue: #[番号]
- Related MR: ![番号]
- Design: [Figmaリンクなど]
- Documentation: [関連ドキュメント]

## ⚠️ 注意事項

### 既知の制限事項
[あれば記載]


### デプロイ時の注意点
[あれば記載]

---

## 出力フォーマット

生成したマージリクエスト本文は、以下のようにコードブロックで囲んで提供してください:

````markdown
```markdown
[生成されたマージリクエスト本文]
```
````

## ベストプラクティス

### 1. **簡潔かつ具体的に**
- 冗長な説明を避け、重要な情報に焦点を当てる
- 専門用語は適切に使用し、必要に応じて説明を加える

### 2. **読み手を意識**
- レビュアーが変更を理解しやすいように構成
- 変更の規模が大きい場合は、読む順序を提案

### 3. **視覚的な情報を活用**
- 絵文字で情報を整理(過度な使用は避ける)
- スクリーンショットやGIFで視覚的に説明

### 4. **文脈を提供**
- なぜその設計判断をしたのか
- 他の選択肢とその比較
- 技術的トレードオフ

### 5. **レビューの効率化**
- 重要度の高い変更を強調
- 自明な変更は簡潔に
- レビュアーの時間を尊重

### 6. **将来の自分への配慮**
- 6ヶ月後に読んでも理解できる説明
- 設計判断の理由を残す
- 参考資料へのリンク

## 参考: 良いマージリクエストの例

### ✅ 良い例
```markdown
## 📝 変更概要
カスタムダッシュボードのグラフ追加時に、自動的にレイアウト編集モードに遷移する機能を実装しました。

## 🎯 変更の目的
### 背景
現在、ユーザーがカスタムダッシュボードにグラフを追加しても、手動でレイアウト編集モードに入らなければ配置できず、UXが悪い状態でした。

### 解決する課題
- Closes #123
- 特に空のダッシュボードにグラフを追加する際のユーザービリティが悪い

## 🔧 実装内容
`use-dashboard-manager.ts`の`addGraphToDashboard`関数内で、グラフ追加後に`setIsEditing(true)`を呼び出すよう変更しました。
```

### ❌ 悪い例
```markdown
## 変更内容
いくつかバグを修正しました。

## ファイル
- page.tsx
- use-dashboard-manager.ts
```

## 注意事項

- **コンポーネント名へのリンクは避ける**: Markdownリンクではなくインラインコードで記述
  - ❌ `[DashboardGrid](./components/DashboardGrid.tsx)`
  - ✅ `` `DashboardGrid` コンポーネント``
- **コミットメッセージから推測しない**: 実際のコード変更を確認して記述
- **自動生成に頼りすぎない**: 文脈や意図は人間が説明する必要がある
